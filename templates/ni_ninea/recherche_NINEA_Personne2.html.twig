<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

     <!-- Bootstrap Css -->
     <link href="{{ asset('admin/dist/assets/css/bootstrap.min.css')}}" id="bootstrap-style" rel="stylesheet" type="text/css"/> <!-- Icons Css -->
     <link href="{{ asset('admin/dist/assets/css/icons.min.css')}}" rel="stylesheet" type="text/css"/>
    
     
    <!-- DataTables -->
    <link href="{{ asset('admin/dist/assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css')}}" rel="stylesheet" type="text/css" />
    
    
        <!-- Icons Css -->
    <link  href="{{ asset('admin/dist/assets/css/icons.min.css')}}" rel="stylesheet" type="text/css"/>
           <!-- App Css-->
    <link href="{{ asset('admin/dist/assets/css/app2.min.css')}}" id="app-style" rel="stylesheet" type="text/css"/>

    <style>

    </style>

    <title>Liste des NINEAS</title>
</head>
<body>
        
<div class="container">
    <div class="row">
        <div class="col-12">
           
            {% for message in app.session.flashbag.get('message')%}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{message}}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>

            {% endfor %}

            <div class="card mt-4">
                <div class="card-body">
                    <div class="row justify-content-between">
                        <form action="" method="get" autocomplete="off">
                            <div class="row">
                                <div class="col-xl-12">
                                    <div class="box mt-lg-5">
                                        <div class="box-header">
                                            <ul class="nav nav-tabs nav-tabs-left">
                                                <li class="active">
                                                    <a href="#list" data-toggle="tab"><i class="fas fa-list"></i> 
                                                      
                                                      Rechercher NINEA
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    
                                        <div class="box-content padded">
                                    
                                            <div class="tab-content">            
                                                <div class="example-wrapper ">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div class="card">
                                                            <div class="card-body">
                                      
                                                                <fieldset class="p-2">
                                                                    <div class="row justify-center">
                                                                        <div class="col-lg-6">
                
                                                                            <table width="100%" >
                                                                                <tr>
                                                                                    <td style="width: 30%;"><label for=""><b><u> N° NINEA : </u></b> </label></td>
                                                                                    <td style="width: 70%;">
                                                                                        <input type="text" name="numNinea"  id="inputmere" {% if numNinea !="" %} value="{{numNinea}}" {% endif %} 
                                                                                        class="form-control form-control-sm " oninput="this.value = this.value.replace(/[^0-9,]/g, '');">
                                                                                        
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="width: 30%;"><label for=""><b><u> Raison sociale : </u></b> </label></td>
                                                                                    <td style="width: 70%;"><input type="text" name="raisonsociale" onkeyup="this.value=this.value.toUpperCase()" class="form-control form-control-sm"
                                                                                        {% if raison !="" %} value="{{raison}}" {% endif %}></td>
                                                                                </tr>
                                                                              
                                                                                <tr class="mt-2">
                                                                                    <td style="width: 30%;"><label for=""><b><u> Enseigne : </u></b> </label></td>
                                                                                    <td style="width: 70%;"><input type="text" onkeyup="this.value=this.value.toUpperCase()" name="enseigne" class="form-control form-control-sm"
                                                                                        {% if enseigne !="" %} value="{{enseigne}}" {% endif %}></td>
                                                                                </tr> 
                                                                               
                                                                                <tr>
                                                                                    <td style="width: 30%;"><label for="" ><b><u> Date de naissance : </u></b> </label></td>
                                                                                    <td style="width: 70%;"><input class="form-control form-control-sm" type="date" name="datenais"
                                                                                        {% if datenais !="" %} value="{{datenais|format("Y-m-d")}}" {% endif %}></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    
                                                                                    <td style="width: 30%;" ><label for="" ></label></td>
                                                                                    <td style="width: 70%;">
                                                                                        <input type="submit" value="Rechercher" name="filtre" class="boutonsm mt-2">
                                                                                    </td>
                                                                                </tr>
                                                                            </table>   
                                                                        </div>
                                                                    
                                                                    </div>                                                                                              
                            
                                                                    
                                                                </fieldset>
                                                                    
                                                            </div>
                                                        </div>
                                                        </div>
                                                    </div>
                                                    <!-- end row -->
                                                </div>
                                                                    
                                            </div>
                                                
                                        </div>
                                    </div>

                                    
                                </div>
                                <!-- end col -->
            
                            </div>
            
                           
                         </form>

                      
    
                        <div class="col-lg-12 mt-4  table-responsive-lg">
                               
                                <div class="col-lg-2">
                                    <div id="divChoisir" >
                                        <button type="button" class="boutonsm" id="btnChoisir" style="display: none;"> Choisir </button>
                                    </div>
                                </div>

                                <div class="box mt-lg-5">
                                    <div class="box-header">
                                        <ul class="nav nav-tabs nav-tabs-left">
                                            <li class="active">
                                                <a href="#list" data-toggle="tab"><i class="fas fa-list"></i> 
                                                  
                                                   Liste NINEA
                                                </a>
                                            </li>
                                
                                          
                                
                                        </ul>
                                    </div>
                                
                                    <div class="box-content padded">
                                
                                        <div class="tab-content">            
                                            <div class="example-wrapper ">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <div class="card">
                                                        <div class="card-body">
                                  
                                
                                                            {% if ninineas and ninineas|length > 0 %}
                                                            <table id="ninea" class="table table-bordered dt-responsive table-hover nowrap w-100 mt-4">
                                                                
                                                                <thead class="tr_entete" >
                                                                    <tr>
                                                                        <th></th>
                                                                        <th></th>
                                                                        <th>NINEA</th>
                                                                        <th>Raison sociale</th>
                                                                        <th>Enseigne</th>
                                                                        <th>Etat</th>
                                                                                                                                            
                                                                    </tr>
                                                                </thead>
                                                            
                                                                <tbody>
                                                                        {% for tag in ninineas %}
                                                                            {% if tag.formeJuridique.id == 10 %}
                                                                                
                                                                                <tr>
                                                                                    <td>{{ tag.ninNinea|length>9 ? tag.ninNinea:tag.ninNinea ~"0000" }}</td>
                                
                                                                                    <td> 
                                                                                        {% if tag.ninEtat == 1 %}
                                                                                        <input type="radio" name="nineamere" id="idNineamere" value="{{ tag.ninNinea}}">
                                                                                        {% endif %}
                                                                                    
                                                                                    </td>
                                                                                    <td>{{ tag.ninNinea }}</td>
                                                                                    <td style=" word-break: break-all;">
                                                                                        {% if tag.formeJuridique.niFormeunite.id ==  21 or tag.formeJuridique.niFormeunite.id ==  22 %}
                                                                                            {{ tag.niPersonne.ninRaison }}
                                                                                        {% elseif tag.formeJuridique.niFormeunite.id ==  11 or tag.formeJuridique.niFormeunite.id ==  12 %} 
                                                                                                {{ tag.niPersonne.ninNom }} {{ tag.niPersonne.ninPrenom }} 
                                                                                        {% endif %}
                                                                                    </td>
                                                                                    <td style=" word-break: break-all; width: 40%;">{{ tag.ninEnseigne }}</td>
                                                                                    <td>{{tag.ninEtat != 0 ? "Activé":"Suspendue"}}</td>
                                                                                </tr>
                                                                            {% endif %}

                                            
                                                                
                                                                        {% endfor %}
                                                                </tbody>
                                                            </table>
                                                        {% else %}
                                                            <table id="ninea" class="table table-bordered dt-responsive table-hover nowrap w-100 mt-4">
                                                                
                                                                <thead class="tr_entete" >
                                                                    <tr>
                                                                        <th></th>
                                                                    
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                        <tr>
                                                                            <td> 
                                                                                
                                                                            </td>
                                                                        </tr>
                                                                </tbody>
                                                            </table>
                                                        {% endif %}
                                                                
                                                        </div>
                                                    </div>
                                                    </div>
                                                </div>
                                                <!-- end row -->
                                            </div>
                                                                
                                        </div>
                                            
                                    </div>
                                </div>

                            
                        </div>

                        
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- end col -->
    </div>
</div>

    <script src="{{ asset('admin/dist/assets/libs/jquery/jquery.min.js')}}"></script>
    <script src="{{ asset('admin/dist/assets/libs/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
    <script src="{{ asset('admin/dist/assets/libs/datatables.net/js/jquery.dataTables.min.js')}}"></script>
    <script src="{{ asset('admin/dist/assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js')}}"></script>
    <script src="{{ asset('admin/dist/assets/js/pages/datatables.init.js')}}"></script>

    <script src="{{ asset('admin/dist/assets/js/autocomplete.jquery.min.js')}}"></script>
   
    <script>
        
        //
        //if (document.getElementById("").checked == true)


        $("#btnChoisir").on("click", function()
        {
            var valeur = document.querySelector('input[name="nineamere"]:checked').value;
            window.opener.document.getElementById("inputmere").value = valeur;
            window.close();
        });

        $("input[name='nineamere']").change(function()
        {
            if (document.querySelector('input[name="nineamere"]:checked'))
            {
                console.log(document.querySelector('input[name="nineamere"]:checked'));
                document.getElementById("btnChoisir").style.display = "block";
            }
        });

       
        
    </script>
</body>
</html>


